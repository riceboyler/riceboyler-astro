---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from 'astro:assets';
import { css } from '../../styled-system/css';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang='en'>
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body>
    <Header />
    <main
      class={css({
        width: 'calc(100% - 2em)',
        maxWidth: '100%',
        margin: 0
      })}
    >
      <article>
        <div
          class={css({
            width: '100%'
          })}
        >
          {
            heroImage && (
              <Image
                width={1020}
                height={510}
                src={heroImage}
                alt=''
                class={css({
                  display: 'block',
                  margin: '0 auto',
                  borderRadius: '12px',
                  border: '1px solid token(colors.border.primary)',
                  boxShadow: '0 8px 16px rgba(0, 0, 0, 0.4)'
                })}
              />
            )
          }
        </div>
        <div
          class={css({
            width: '720px',
            maxWidth: 'calc(100% - 2em)',
            margin: 'auto',
            padding: '1em',
            color: 'text.primary',
            fontFamily: 'zilla'
          })}
        >
          <div
            class={css({
              marginBottom: '1em',
              padding: '1em 0',
              textAlign: 'center',
              lineHeight: 1
            })}
          >
            <div
              class={css({
                marginBottom: '0.5em',
                color: 'text.muted'
              })}
            >
              <FormattedDate date={pubDate} />
              {
                updatedDate && (
                  <div
                    class={css({
                      fontStyle: 'italic'
                    })}
                  >
                    Last updated on <FormattedDate date={updatedDate} />
                  </div>
                )
              }
            </div>
            <h1
              class={css({
                margin: '0 0 0.5em 0',
                background:
                  'linear-gradient(135deg, token(colors.indigo.400), token(colors.navy.300))',
                backgroundClip: 'text',
                color: 'transparent',
                textShadow: 'none',
                fontFamily: 'zen'
              })}
            >
              {title}
            </h1>
            <hr
              class={css({
                borderTop: '1px solid token(colors.border.primary)',
                margin: '1em 0'
              })}
            />
          </div>
          <slot />
        </div>
      </article>
    </main>
    <Footer />
  </body>
</html>
